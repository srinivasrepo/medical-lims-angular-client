<page-head [pageTitle]="pageTitle" [viewBack]="'true'" [backUrl]="backUrl"></page-head>
<mat-card class="mat-card-c div-content mb-4 mt-1rem qc_mobp-main-tab">
    <mat-card-content>
        <!-- <form [formGroup]="capabilityForm">
            <mat-grid-list cols="2" rowHeight="8:1">
                <mat-grid-tile>
                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>Capability</mat-label>
                        <mat-select placeholder="Capability" name="capability" id="capability" formControlName="capability">
                            <mat-option *ngFor="let cap of capabilityList" [value]="cap.capabilityID">
                                {{cap.capabilityName}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </mat-grid-tile>
                <mat-grid-tile>
                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>Department</mat-label>
                        <mat-select placeholder="Department" name="department" id="dept" formControlName="deptID">
                            <mat-option *ngFor="let dep of deptList" [value]="dep.deptID">{{dep.deptName}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </mat-grid-tile>
            </mat-grid-list>

            <div class="textalign-right">
                <button type="button" mat-raised-button class="btn-save" (click)="add()">
                    Add</button>
            </div>

            <lims-grid (onActionClicked)="onActionClicked($event)" [headers]="headersData" [dataSource]="dataSource" [actions]="actions"></lims-grid>
        </form> -->
        <form class="capability">
            <ul align="center">
                    <li *ngFor="let dept of deptList;let i = index;">
                        <span class="bold">{{dept.departmentName}}</span>
                                <ul>
                                <li *ngFor="let capa of capabilityList;let j = index;">

                                    <mat-checkbox class="check-box-mr" id="{{i}}{{j}}" [disabled]="disableCheckBox" [checked]="isCheckedCapability(dept.departmentID, capa.capabilityID)"
                                        name="m{{i}}{{j}}" (change)="manageCapa($event, dept.departmentID, capa.capabilityID)">
                                    </mat-checkbox>

                                    <b>{{capa.capability}} </b>

                                    <i class="{{_global.icnUserAssign}} qc_ricon"  *ngIf="buttonType == 'Update' ? isCheckedCapability(dept.departmentID, capa.capabilityID) && disableCheckBox : false" (click)="assignRoles(dept.departmentID, capa.capabilityID)"></i>


                                </li>
                            </ul>
                        
                    </li>







            </ul>

            <div class="mt-3" align="right">
                <button type="button" mat-raised-button class="btnbase btn-blue" (click)="add()" id="btnLoaders" btnLoader
                [isLoaderOn]="isLoaderStartBtn">
                    <i class="{{_global.icnSave}}" *ngIf="buttonType == 'Save'"></i>
                    <i class="{{_global.icnUpdate}}" *ngIf="buttonType == 'Update'"></i>&nbsp;{{buttonType}}</button>
            </div>

        </form>

    </mat-card-content>
</mat-card>